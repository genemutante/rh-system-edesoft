<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Edesoft Academy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="../estilos-treinamentos/catalogo-style.css">
  <script type="module" src="../bd-treinamentos/db-handler.js"></script>
  <script type="module" src="../scripts-treinamentos/catalogo.js"></script>
<body>
  <div class="page">

    <section class="app-header">
      
      <div class="header-top">
        <p class="header-desc">
          </p>
      </div>

      <div class="toolbar">

        <div class="toolbar-filters">
          <div class="select-wrapper">
            <label>Trilha</label>
            <select id="filtro-trilha">
              <option value="">Todas</option>
            </select>
          </div>

          <div class="select-wrapper">
            <label>Subtrilha</label>
            <select id="filtro-subtrilha">
              <option value="">Todas</option>
            </select>
          </div>
          
          <div class="select-wrapper" style="flex-direction: row; align-items: center; gap: 8px; padding-top: 10px;">
              <input type="checkbox" id="filtro-ver-ocultos" style="width: 18px; height: 18px; cursor: pointer;">
              <label for="filtro-ver-ocultos" style="position: static; color: #64748b; font-size: 0.85rem; cursor: pointer;">
                  Mostrar Ocultos
              </label>
          </div>

          <div class="select-wrapper">
            <label>Status</label>
            <select id="filtro-status">
              <option value="">Todos</option>
              <option value="DISPON√çVEL">Dispon√≠vel</option>
              <option value="EM DESENVOLVIMENTO">Em Desenv.</option>
              <option value="BACKLOG">Backlog</option>
            </select>
          </div>

          <div class="toolbar-search">
            <svg class="search-icon" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
            <input type="text" id="filtro-busca" placeholder="Buscar por t√≠tulo ou palavra-chave...">
          </div>

          <button class="btn-reset" id="btn-limpar-filtros" title="Limpar Filtros">
             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
          </button>
        </div>

        <div class="toolbar-actions" style="margin-left: auto; display: flex; gap: 10px;">
            <button id="btn-novo-curso" class="btn-primary-full" style="display: flex; align-items: center; gap: 8px; width: auto; background-color: #0f172a; color: white; border: none; padding: 0 16px; border-radius: 99px; cursor: pointer;">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/></svg>
                Novo Curso
            </button>
        </div>

      </div>
    </section>

    <section class="resumo">
      <div class="card-metric">
        <div class="metric-icon icon-purple">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3.063 6.253M12 6.253V4.167h-1" />
          </svg>
        </div>
        <div class="metric-content">
          <span class="metric-value" id="resumo-total">0</span>
          <span class="metric-label">Total Cursos</span>
        </div>
      </div>

      <div class="card-metric">
        <div class="metric-icon icon-green">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="metric-content">
          <span class="metric-value text-green" id="resumo-disponivel">0</span>
          <span class="metric-label">Total Dispon√≠vel</span>
        </div>
      </div>

      <div class="card-metric">
        <div class="metric-icon icon-blue">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
          </svg>
        </div>
        <div class="metric-content">
          <span class="metric-value text-blue" id="resumo-em-dev">0</span>
          <span class="metric-label">Total em Dev.</span>
        </div>
      </div>

      <div class="card-metric">
        <div class="metric-icon icon-orange">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        </div>
        <div class="metric-content">
          <span class="metric-value text-orange" id="resumo-backlog">0</span>
          <span class="metric-label">Total Backlog</span>
        </div>
      </div>

      <div class="card-metric">
        <div class="metric-icon icon-cyan">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
             <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <div class="metric-content">
          <span class="metric-value" id="resumo-horas">0h</span>
          <span class="metric-label">Carga Hor√°ria</span>
        </div>
      </div>

      <div class="card-metric">
         <div class="metric-icon icon-gray">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>
         </div>
         <div class="metric-content">
             <span class="metric-value" id="resumo-total-aulas">0</span>
             <span class="metric-label">Total de Aulas</span>
         </div>
      </div>
    </section>

    <section id="lista-cursos" class="lista-cursos">
      </section>
    
    <footer class="page-footer">
       &copy; 2025 Edesoft. Todos os direitos reservados.
    </footer>
  </div>

<div id="modal-youtube" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Sincronizar Playlist do YouTube</h2>
      <button class="btn-close-modal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Selecione o Curso para Atualizar</label>
        <select id="yt-curso-selecionado" class="input-premium">
            <option value="">Carregando cursos...</option>
        </select>
        <small style="color: #ef4444; margin-top: 5px; display:block;">‚ö†Ô∏è Aten√ß√£o: Isso substituir√° todas as aulas atuais deste curso pelas da playlist.</small>
      </div>
      <div class="form-row">
        <div class="form-group" style="flex: 1;">
            <label>YouTube API Key</label>
            <input type="password" id="yt-api-key" class="input-premium" placeholder="Cole sua chave API aqui...">
        </div>
        <div class="form-group" style="flex: 1;">
            <label>ID da Playlist ou URL Completa</label>
            <input type="text" id="yt-playlist-id" class="input-premium" placeholder="Ex: PLx0sYbCqOb8TBPRdmBHs5Iftvv9TPboYG">
        </div>
      </div>
      <button id="btn-buscar-videos" class="btn-primary-full">üîç Buscar V√≠deos na Playlist</button>
      <div id="yt-preview-area" style="margin-top: 20px; display: none;">
         <h3 style="font-size: 0.9rem; margin-bottom: 10px;">Preview (<span id="yt-total-videos">0</span> v√≠deos encontrados)</h3>
         <div class="preview-table-wrapper">
             <table class="preview-table">
                 <thead><tr><th>#</th><th>T√≠tulo</th><th>Dura√ß√£o</th><th>Link</th></tr></thead>
                 <tbody id="yt-lista-videos"></tbody>
             </table>
         </div>
      </div>
    </div>
    <div class="modal-footer">
      <span id="yt-status-msg" class="status-msg"></span>
      <button id="btn-salvar-sincronizacao" class="btn-save" disabled>üíæ Salvar e Atualizar Aulas</button>
    </div>
  </div>
</div>

<div id="modal-lista-aulas" class="modal-overlay" style="display: none;">
  <div class="modal-content" style="max-width: 600px;">
    <div class="modal-header">
      <h2 id="modal-titulo-curso">Grade Curricular</h2>
      <button class="btn-close-modal-aulas btn-close-modal">&times;</button>
    </div>
    <div class="modal-body">
      <div class="curso-meta-info">
         <span id="modal-qtd-aulas" class="badge-info">0 aulas</span>
         <span id="modal-tempo-total" class="badge-info">0 min</span>
      </div>
      <ul id="lista-aulas-container" class="lista-aulas-premium">
        </ul>
    </div>
    <div class="modal-footer">
      <button class="btn-secondary-full btn-close-modal-aulas">Fechar</button>
    </div>
  </div>
</div>

<div id="modal-curso" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modal-curso-titulo">Novo Curso</h2>
      <button class="btn-close-modal-curso btn-close-modal">&times;</button>
    </div>
    
    <div class="modal-body">
      <form id="form-curso">
        <input type="hidden" id="curso-id">
        
        <div class="form-row">
            <div class="form-group" style="flex: 4;">
                <label>Nome do Curso</label>
                <input type="text" id="curso-nome" class="input-premium" required placeholder="Ex: Lideran√ßa √Ågil" autocomplete="off">
            </div>
            
            <div class="form-group" style="flex: 1.5; min-width: 140px;">
                <label>Status</label>
                <select id="curso-status" class="input-premium">
                    <option value="DISPON√çVEL">Dispon√≠vel</option>
                    <option value="EM DESENVOLVIMENTO">Em Desenv.</option>
                    <option value="BACKLOG">Backlog</option>
                </select>
            </div>

            <div class="form-group toggle-wrapper" style="flex: 0 0 auto;">
                <label style="font-size: 0.75rem; color: #64748b;">Exibir?</label>
                <label class="switch">
                    <input type="checkbox" id="curso-exibir" checked>
                    <span class="slider round"></span>
                </label>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group" style="flex: 1;">
                <label>Trilha</label>
                <div style="display: flex; gap: 8px;">
                    <div class="select-wrapper" style="flex: 1;" id="box-select-trilha">
                        <select id="curso-trilha-select" class="input-premium"></select>
                    </div>
                    <input type="text" id="curso-trilha-input" class="input-premium" style="display: none; flex: 1;" placeholder="Nova trilha...">
                    
                    <button type="button" id="btn-toggle-trilha" class="btn-icon-editar" title="Criar/Selecionar" style="border-radius: 8px; flex-shrink: 0;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" x2="12" y1="5" y2="19"/><line x1="5" x2="19" y1="12" y2="12"/></svg>
                    </button>
                </div>
            </div>

            <div class="form-group" style="flex: 1;">
                <label>Subtrilha</label>
                <input type="text" id="curso-subtrilha" class="input-premium" placeholder="Ex: Vendas">
            </div>
        </div>

        <div class="form-group">
            <div class="youtube-wrapper">
                
                <label class="youtube-label">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"/><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="currentColor"/></svg>
                    Integra√ß√£o com YouTube
                </label>

                <div style="display: flex; gap: 8px;">
                    <input type="url" id="curso-link" class="input-premium" placeholder="Cole a URL da playlist aqui..." style="flex: 1;">
                    
                    <button type="button" id="btn-sync-youtube-rapido" class="btn-youtube-sync" title="Buscar dados da Playlist">
                        <span style="font-size: 0.85rem; font-weight: 600;">Sincronizar</span>
                    </button>
                </div>

                <div class="sync-metadata" id="box-metadata-sync">
                    <div class="meta-item">
                        <span class="meta-label">Aulas:</span>
                        <span class="meta-value" id="meta-qtd-aulas">0</span>
                    </div>
                    <div style="width: 1px; height: 12px; background: #cbd5e1;"></div>
                    <div class="meta-item">
                        <span class="meta-label">Tempo:</span>
                        <span class="meta-value" id="meta-tempo-total">0 min</span>
                    </div>
                    <div style="width: 1px; height: 12px; background: #cbd5e1;"></div>
                    <div class="meta-item" style="flex: 1;">
                        <span class="meta-label">Sync:</span>
                        <span class="meta-value" id="meta-data-sync">Nunca</span>
                    </div>
                    
                    <div class="meta-badge-pendente" id="badge-pendente" style="display: none;">
                        Pendentes
                    </div>
                </div>

                <small class="youtube-help-text">
                    Cole o link da playlist e clique em sincronizar. As aulas ser√£o importadas automaticamente.
                </small>
            </div>
        </div>

        <div class="form-group" style="flex-grow: 1;">
            <label>Descri√ß√£o</label>
            <textarea id="curso-descricao" class="input-premium" rows="3" placeholder="Resumo do conte√∫do do curso..."></textarea>
        </div>

        <div id="area-delete" style="display: none; text-align: right; margin-top: -5px;">
            <button type="button" id="btn-excluir-curso" style="color: #ef4444; background: none; border: none; font-size: 0.75rem; cursor: pointer; text-decoration: underline;">
                Excluir este curso permanentemente
            </button>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn-secondary-full btn-close-modal-curso">Cancelar</button>
      
      <button type="button" id="btn-salvar-curso" class="btn-save" disabled>
          Salvar Altera√ß√µes
      </button>
    </div>
  </div>
</div>

</body>
</html>
